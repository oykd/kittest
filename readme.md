# Test task for kit

Рабочая версия развернута тут: http://test.melenima.net

login: admin / pass: 12345

(пользователей можно дополнительно добавить в /admin)

## Установка:

1. редактируем файл _database.conf.php в соответствии с настройками MySQL;
2. переименовываем файл в database.conf.php (убрать нижнее подчеркивание);
3. настройка apache например такая:
```
    <VirtualHost *:80>
    	DocumentRoot "path\to\project\public"
    	ServerName mysitename.com
    	<Directory "path\to\project\public">
    		Options Indexes FollowSymLinks Includes ExecCGI
    		AllowOverride All
    		Require all granted
    	</Directory>
    </VirtualHost>
```

Директория \public должна быть настроена как DocumentRoot.

Все необходимые таблицы будут созданы при первом посещении страницы.
Также будет создан дефолтный пользователь: admin/12345

## Описание

Приложение написано в парадигме MVC.

Точка входа в приложение \public\index.php. 
Там происходит автозагрузка классов и запускается экземпляр основного класса Application. 
Зависимости реализованы через паттерн Singleton (достаточно по причине простоты задачи). 
Приложение запускается через метод run().

Дополнительные комментарии в php коде.  

####Backend:
* /app/Application.php - основной класс;
* /app/Router - марштрутизатор выбирает контроллер в зависимости от URI и роли пользователя;
* /config/routes.conf.php - настройки марштрутизатора;
* /app/Controllers - контроллеры обрабатывают запрос при помощи моделей и выбирают шаблон для отображения страницы;
* /app/Models - получают и сохраняют данные в БД в необходимом виде;
* /views - шаблоны отображаемых страниц;
* /app/Exceptions - исключения для основного блока try в методе Application->run();
* /app/DB - классы БД;
* /public/ - root сайта, видимый извне.

####Frontend:
* /public/auth.js - js для авторизации;
* /public/tree.js - js для работы с деревом;
* /public/style.css - стили.

## Примечания:

* в классе DB\MySQL следует использовать PDO
(используется mysqli, исходя из условий задания - никаких сторонних средств); 
* скалярная и другая типизация аргументов не используется по причине ограничения версии PHP (5) в задании; 
* типы однако указываются в блоках phpdoc для подсказок IDE;
* нет минификации JS и не используется scss/sass для стилей;
* не реализованы тесты;
* рекурсивное удаление элементов дерева реализовано средствами mysql (ON DELETE CASCADE);
* сессия пользователя сохраняется в $_SESSION, куки не используются. 

